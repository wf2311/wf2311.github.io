<!DOCTYPE html>
<html lang="en">

<head>
	<meta http-equiv="content-type" content="text/html; charset=utf-8">
	<meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport">
	
	<!-- title -->
	
	<title>
	
		MySQL 优化之 index merge(索引合并) | 
	 
	王峰的博客
	</title>
	
	<!-- keywords,description -->
	 

	<!-- favicon -->
	
	<link rel="shortcut icon" href="../favicon.ico">
	
  

	<!-- search -->
	<script>
		var searchEngine = "";
		if(typeof searchEngine == "undefined" || searchEngine == null || searchEngine == ""){
			searchEngine = "https://www.google.com/search?q=";
		}
		var homeHost = "";
		if(typeof homeHost == "undefined" || homeHost == null || homeHost == ""){
			homeHost = window.location.host;
		}
	</script>


	
<link rel="stylesheet" href="../css/main.css">

	
<link rel="stylesheet" href="../css/jquery.fancybox.min.css">

	
<link rel="stylesheet" href="../https:/cdn.staticfile.org/font-awesome/4.7.0/css/font-awesome.min.css">

	
<link rel="stylesheet" href="../https:/cdn.jsdelivr.net/gh/highlightjs/cdn-release@9.17.1/build/styles/darcula.min.css">

	
<link rel="stylesheet" href="../css/clipboard-use.css">


	
<script src="../https:/cdn.jsdelivr.net/gh/highlightjs/cdn-release@9.17.1/build/highlight.min.js"></script>

	
<script src="../https:/cdn.jsdelivr.net/npm/jquery@3.4.1/dist/jquery.min.js"></script>

	
<script src="../https:/cdn.jsdelivr.net/npm/jquery-pjax@2.0.1/jquery.pjax.min.js"></script>

	
<script src="../js/main.js"></script>

	
<script src="../js/jquery.fancybox.min.js"></script>

	
		
<script src="../https:/cdn.jsdelivr.net/npm/leancloud-storage/dist/av-min.js"></script>

		
<script src="../https:/cdn.jsdelivr.net/npm/valine@1.3.10/dist/Valine.min.js"></script>

	
	
		<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
	
	
<script src="../js/clipboard.min.js"></script>

<meta name="generator" content="Hexo 5.4.0"><link rel="stylesheet" href="/css/prism-tomorrow.css" type="text/css">
<link rel="stylesheet" href="/css/prism-line-numbers.css" type="text/css"></head>

<body>
	<header id="header">
    <a id="title" href="../index.html" class="logo">王峰的博客</a>

	<ul id="menu">
		<li class="menu-item">
			<a href="/about" class="menu-item-link">关于我</a>
		</li>

		<li class="menu-item">
			<a href="/note" class="menu-item-link">读书笔记</a>
		</li>

		<li class="menu-item">
			<a href="/个人公众号.jpg" class="menu-item-link">我的公众号</a>
		</li>

		<li class="menu-item">
			<a href="/summary" class="menu-item-link">公众号文章汇总</a>
		</li>
		
		<li class="menu-item">
			<a href="https://tech.meituan.com/" class="menu-item-link" target="_blank">
				美团技术团队
			</a>
		</li>
		<li class="menu-item">
			<a href="https://tech.youzan.com/" class="menu-item-link" target="_blank">
				有赞技术团队
			</a>
		</li>
		<!--<li class="menu-item">
			<select class="menu-item-link menu-item-select">
				<option class="menu-item-link"  value="volvo">Volvo</option>
				<option class="menu-item-link"  value="saab">Saab</option>
				<option class="menu-item-link"  value="fiat">Fiat</option>
				<option class="menu-item-link"  value="audi">Audi</option>
			</select>
		</li>-->
	</ul>
</header>

	
<div id="sidebar">
	<button id="sidebar-toggle" class="toggle" ><i class="fa fa-arrow-right " aria-hidden="true"></i></button>
	
	<div id="site-toc">
		<input id="search-input" class="search-input" type="text" placeholder="按目录搜索一下">
		<div id="tree">
			

			
							<ul>
								<li class="directory">
									<a href="#" class="directory">
										<i class="fa fa-plus-square-o"></i>
										Docker
									</a>
									
							<ul>
								<li class="file">
									<a href="../Docker/Docker%E5%91%BD%E4%BB%A4%E5%A4%87%E5%BF%98.html">
										Docker命令备忘
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
								</li>
								
							</ul>
			
							<ul>
								<li class="directory">
									<a href="#" class="directory">
										<i class="fa fa-plus-square-o"></i>
										Git
									</a>
									
							<ul>
								<li class="file">
									<a href="../Git/Git%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E5%A4%87%E5%BF%98.html">
										Git常用命令备忘
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
								</li>
								
							</ul>
			
							<ul>
								<li class="directory">
									<a href="#" class="directory">
										<i class="fa fa-plus-square-o"></i>
										Java
									</a>
									
							<ul>
								<li class="directory">
									<a href="#" class="directory">
										<i class="fa fa-plus-square-o"></i>
										JVM
									</a>
									
							<ul>
								<li class="file">
									<a href="../Java/JVM/Java%E6%93%8D%E4%BD%9C%E7%A0%81%E5%8A%A9%E8%AE%B0%E7%AC%A6.html">
										Java操作码助记符
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="directory">
									<a href="#" class="directory">
										<i class="fa fa-plus-square-o"></i>
										从零学习JVM
									</a>
									
							<ul>
								<li class="file">
									<a href="../Java/JVM/%E4%BB%8E%E9%9B%B6%E5%AD%A6%E4%B9%A0JVM/Java%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%BB%93%E6%9E%84(%E4%B8%80):%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B.html">
										Java虚拟机结构(一):数据类型
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="../Java/JVM/%E4%BB%8E%E9%9B%B6%E5%AD%A6%E4%B9%A0JVM/Java%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%BB%93%E6%9E%84(%E4%BA%8C):%E5%86%85%E5%AD%98%E7%BB%93%E6%9E%84%E6%A6%82%E8%BF%B0.html">
										Java虚拟机结构(二):内存结构概述
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
								</li>
								
							</ul>
			
								</li>
								
							</ul>
			
							<ul>
								<li class="directory">
									<a href="#" class="directory">
										<i class="fa fa-plus-square-o"></i>
										Java基础
									</a>
									
							<ul>
								<li class="file">
									<a href="../Java/Java%E5%9F%BA%E7%A1%80/Java8%E4%B8%AD%E5%88%A9%E7%94%A8Stream%E8%BF%87%E6%BB%A4%E5%B1%9E%E6%80%A7%E9%87%8D%E5%A4%8D%E7%9A%84%E5%85%83%E7%B4%A0.html">
										Java8中利用Stream过滤属性重复的元素
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="../Java/Java%E5%9F%BA%E7%A1%80/Java%E7%9A%84%E6%9E%9A%E4%B8%BE%E7%B1%BB%E4%BD%BF%E7%94%A8%E6%8A%80%E5%B7%A7.html">
										Java的枚举类使用技巧
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="../Java/Java%E5%9F%BA%E7%A1%80/%E5%BD%BB%E5%BA%95%E6%90%9E%E6%87%82%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%AF%94%E8%BE%83%E9%97%AE%E9%A2%98%E5%92%8CString.intern()%E6%96%B9%E6%B3%95%E7%9A%84%E4%BD%9C%E7%94%A8.html">
										彻底搞懂字符串比较问题和String.intern()方法的作用
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="../Java/Java%E5%9F%BA%E7%A1%80/%E6%9C%89%E4%BA%86Closeable%E4%B8%BA%E4%BB%80%E4%B9%88%E8%BF%98%E8%A6%81%E5%AE%9A%E4%B9%89AutoCloseable.html">
										有了Closeable为什么还要定义AutoCloseable
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
								</li>
								
							</ul>
			
							<ul>
								<li class="directory">
									<a href="#" class="directory">
										<i class="fa fa-plus-square-o"></i>
										其他
									</a>
									
							<ul>
								<li class="file">
									<a href="../Java/%E5%85%B6%E4%BB%96/%E4%BD%BF%E7%94%A8%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F%E8%A7%A3%E6%9E%90Nginx%E9%BB%98%E8%AE%A4%E6%97%A5%E5%BF%97.html">
										使用正则表达式解析Nginx默认日志
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
								</li>
								
							</ul>
			
							<ul>
								<li class="directory">
									<a href="#" class="directory">
										<i class="fa fa-plus-square-o"></i>
										多线程与并发
									</a>
									
							<ul>
								<li class="file">
									<a href="../Java/%E5%A4%9A%E7%BA%BF%E7%A8%8B%E4%B8%8E%E5%B9%B6%E5%8F%91/Runnable%E5%AE%9E%E7%8E%B0%E8%B5%84%E6%BA%90%E5%85%B1%E4%BA%AB.html">
										Runnable实现资源共享
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
								</li>
								
							</ul>
			
								</li>
								
							</ul>
			
							<ul>
								<li class="directory">
									<a href="#" class="directory">
										<i class="fa fa-plus-square-o"></i>
										Linux
									</a>
									
							<ul>
								<li class="file">
									<a href="../Linux/ssh%E5%BF%AB%E6%8D%B7%E7%99%BB%E5%BD%95%E5%B9%B6%E6%89%A7%E8%A1%8C%E5%91%BD%E4%BB%A4.html">
										ssh快捷登录并执行命令
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
								</li>
								
							</ul>
			
							<ul>
								<li class="directory">
									<a href="#" class="directory">
										<i class="fa fa-plus-square-o"></i>
										Maven
									</a>
									
							<ul>
								<li class="file">
									<a href="../Maven/Maven%E5%91%BD%E4%BB%A4%E5%A4%87%E5%BF%98.html">
										Maven命令备忘
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="../Maven/%E5%B0%86Maven%E9%A1%B9%E7%9B%AE%E6%89%93%E5%8C%85%E5%8F%91%E5%B8%83%E5%88%B0%E4%B8%AD%E5%A4%AE%E4%BB%93%E5%BA%93.html">
										将Maven项目打包发布到中央仓库
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
								</li>
								
							</ul>
			
							<ul>
								<li class="directory">
									<a href="#" class="directory">
										<i class="fa fa-plus-square-o"></i>
										MySQL
									</a>
									
							<ul>
								<li class="file active">
									<a href="">
										MySQL 优化之 index merge(索引合并)
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
								</li>
								
							</ul>
			
							<ul>
								<li class="directory">
									<a href="#" class="directory">
										<i class="fa fa-plus-square-o"></i>
										Nginx
									</a>
									
							<ul>
								<li class="file">
									<a href="../Nginx/Nginx%E5%87%BA%E7%8E%B0413%20Request%20Entity%20Too%20Large%20%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95.html">
										Nginx出现413 Request Entity Too Large 解决方法
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
								</li>
								
							</ul>
			
							<ul>
								<li class="directory">
									<a href="#" class="directory">
										<i class="fa fa-plus-square-o"></i>
										Spring
									</a>
									
							<ul>
								<li class="file">
									<a href="../Spring/HttpServletRequest%E5%B8%B8%E7%94%A8%E8%8E%B7%E5%8F%96URL%E7%9A%84%E6%96%B9%E6%B3%95.html">
										HttpServletRequest常用获取URL的方法
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="directory">
									<a href="#" class="directory">
										<i class="fa fa-plus-square-o"></i>
										SpringBoot
									</a>
									
							<ul>
								<li class="file">
									<a href="../Spring/SpringBoot/SpringBoot%E4%B8%AD%E4%BD%BF%E7%94%A8Thymeleaf%E6%A8%A1%E6%9D%BF%E5%9C%A8%E6%89%BE%E4%B8%8D%E5%88%B0%E5%AF%B9%E4%BA%8E%E6%A8%A1%E6%9D%BF%E7%9A%84%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95.html">
										SpringBoot中使用Thymeleaf模板在找不到对于模板的解决方法
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="../Spring/SpringBoot/%E5%9C%A8SpringBoot%E9%87%8C%E9%9D%A2%E4%BD%BF%E7%94%A8Thymeleaf3.html">
										在SpringBoot里面使用Thymeleaf3
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
								</li>
								
							</ul>
			
							<ul>
								<li class="file">
									<a href="../Spring/Spring%E4%BA%8B%E4%BB%B6%E7%9A%84%E4%BD%BF%E7%94%A8.html">
										Spring事件的使用
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="../Spring/%E4%BD%BF%E7%94%A8Thymeleaf%E5%8F%98%E9%87%8F%E7%BB%99onclick%E5%B1%9E%E6%80%A7%E8%B5%8B%E5%80%BC.html">
										使用Thymeleaf变量给onclick属性赋值
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="../Spring/%E8%AE%A9%E5%A4%84%E4%BA%8E%E4%BA%8B%E5%8A%A1%E4%B8%AD%E7%9A%84%E7%89%B9%E5%AE%9A%E4%BB%A3%E7%A0%81%E5%9C%A8%E4%BA%8B%E5%8A%A1%E6%8F%90%E4%BA%A4%E6%88%90%E5%8A%9F%E5%90%8E%E5%86%8D%E6%89%A7%E8%A1%8C.html">
										让处于事务中的特定代码在事务提交成功后再执行
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
								</li>
								
							</ul>
			
							<ul>
								<li class="directory">
									<a href="#" class="directory">
										<i class="fa fa-plus-square-o"></i>
										其它
									</a>
									
							<ul>
								<li class="directory">
									<a href="#" class="directory">
										<i class="fa fa-plus-square-o"></i>
										Mac
									</a>
									
							<ul>
								<li class="file">
									<a href="../%E5%85%B6%E5%AE%83/Mac/Mac%E4%B8%AD%E5%9C%A8%E5%8D%87%E7%BA%A7ruby%E7%89%88%E6%9C%AC%E5%90%8Ecolorls%E5%91%BD%E4%BB%A4%E6%8A%A5%E9%94%99%E7%9A%84%E8%A7%A3%E5%86%B3%E5%8A%9E%E6%B3%95.html">
										Mac中在升级ruby版本后colorls命令报错的解决办法
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="../%E5%85%B6%E5%AE%83/Mac/Mac%E4%BD%BF%E7%94%A8tree%E7%94%9F%E6%88%90%E7%9B%AE%E5%BD%95%E7%BB%93%E6%9E%84.html">
										Mac使用tree生成目录结构
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
								</li>
								
							</ul>
			
							<ul>
								<li class="directory">
									<a href="#" class="directory">
										<i class="fa fa-plus-square-o"></i>
										Wakatime
									</a>
									
							<ul>
								<li class="file">
									<a href="../%E5%85%B6%E5%AE%83/Wakatime/WakaTime%E6%95%B0%E6%8D%AE%E5%90%8C%E6%AD%A5%E5%B1%95%E7%A4%BA%E5%B7%A5%E5%85%B7.html">
										WakaTime数据同步展示工具
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="../%E5%85%B6%E5%AE%83/Wakatime/wakatime%E6%89%8B%E5%8A%A8%E5%90%8C%E6%AD%A5%E6%9C%AC%E5%9C%B0%E7%A6%BB%E7%BA%BF%E6%95%B0%E6%8D%AE%E8%87%B3%E6%9C%8D%E5%8A%A1%E5%99%A8.html">
										wakatime手动同步本地离线数据至服务器
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
								</li>
								
							</ul>
			
							<ul>
								<li class="directory">
									<a href="#" class="directory">
										<i class="fa fa-plus-square-o"></i>
										远程调试
									</a>
									
							<ul>
								<li class="file">
									<a href="../%E5%85%B6%E5%AE%83/%E8%BF%9C%E7%A8%8B%E8%B0%83%E8%AF%95/IDEA%20%E8%BF%9C%E7%A8%8B%E8%B0%83%E8%AF%95spring%20boot%E9%A1%B9%E7%9B%AE.html">
										IDEA 远程调试spring boot项目
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="../%E5%85%B6%E5%AE%83/%E8%BF%9C%E7%A8%8B%E8%B0%83%E8%AF%95/SpringBoot%20+%20IDEA%20%E8%BF%9C%E7%A8%8B%E8%B0%83%E8%AF%95.html">
										SpringBoot + IDEA 远程调试
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
								</li>
								
							</ul>
			
								</li>
								
							</ul>
			
							<ul>
								<li class="directory">
									<a href="#" class="directory">
										<i class="fa fa-plus-square-o"></i>
										前端
									</a>
									
							<ul>
								<li class="file">
									<a href="../%E5%89%8D%E7%AB%AF/jQuery%20checkbox%E9%80%89%E4%B8%AD%E3%80%81%E6%94%B9%E5%8F%98%E7%8A%B6%E6%80%81%E3%80%81change%E5%92%8Cclick%E4%BA%8B%E4%BB%B6.html">
										jQuery checkbox选中、改变状态、change和click事件
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="../%E5%89%8D%E7%AB%AF/%E5%A6%82%E4%BD%95%E4%BC%98%E9%9B%85%E5%9C%B0%E5%9C%A8Hexo%E5%8D%9A%E5%AE%A2%E4%B8%AD%E5%B5%8C%E5%85%A5SVG%E6%96%87%E4%BB%B6.html">
										如何优雅地在Hexo博客中嵌入SVG文件
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
								</li>
								
							</ul>
			
							<ul>
								<li class="directory">
									<a href="#" class="directory">
										<i class="fa fa-plus-square-o"></i>
										数据结构与算法
									</a>
									
							<ul>
								<li class="file">
									<a href="../%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%B0%B4%E4%BB%99%E8%8A%B1%E7%AE%97%E6%B3%95.html">
										水仙花算法
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
								</li>
								
							</ul>
			
		</div>
	</div>
</div>

	<!-- 引入正文 -->
	<div id="content">
		<h1 id="article-title">

	MySQL 优化之 index merge(索引合并)
</h1>
<div class="article-meta">
	
	<span>王峰</span>
	<span>2017-07-14 16:09:10</span>
    
		<div id="article-categories">
            
                
                    <span>
                        <i class="fa fa-folder" aria-hidden="true"></i>
                        <a href="/categories/MySQL/">MySQL</a>
						
                    </span>
                
            
		</div>
    
</div>

<div id="article-content">
	<blockquote>
<p>深入理解 index merge 是使用索引进行优化的重要基础之一。理解了 index merge 技术，我们才知道应该如何在表上建立索引。<br><span id="more"></span></p>
</blockquote>
<h2 id="1-为什么会有index-merge"><a href="#1-为什么会有index-merge" class="headerlink" title="1.为什么会有index merge"></a>1.为什么会有index merge</h2><p>我们的 where 中可能有多个条件(或者join)涉及到多个字段，它们之间进行 AND 或者 OR，那么此时就有可能会使用到 index merge 技术。index merge 技术如果简单的说，其实就是：对多个索引分别进行条件扫描，然后将它们各自的结果进行合并(intersect/union)。</p>
<p>MySQL5.0之前，一个表一次只能使用一个索引，无法同时使用多个索引分别进行条件扫描。但是从5.1开始，引入了 index merge 优化技术，对同一个表可以使用多个索引分别进行条件扫描。</p>
<p>相关文档：<a target="_blank" rel="noopener" href="http://dev.mysql.com/doc/refman/5.6/en/index-merge-optimization.html">http://dev.mysql.com/doc/refman/5.6/en/index-merge-optimization.html</a> (注意该文档中说的有几处错误)</p>
<p>The Index Merge method is used to retrieve rows with several range scans and to merge their results into one. The merge can produce unions, intersections, or unions-of-intersections of its underlying scans. This access method merges index scans from a single table; it does not merge scans across multiple tables.</p>
<p>In EXPLAIN output, the Index Merge method appears as index_merge in the type column. In this case, the key column contains a list of indexes used, and key_len contains a list of the longest key parts for those indexes.</p>
<p>index merge: 同一个表的多个索引的范围扫描可以对结果进行合并，合并方式分为三种：union, intersection, 以及它们的组合(先内部intersect然后在外面union)。</p>
<p>官方文档给出了四个例子：</p>
<pre class="line-numbers language-sql"><code class="language-sql">    <span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> tbl_name <span class="token keyword">WHERE</span> key1 <span class="token operator">=</span> <span class="token number">10</span> <span class="token operator">OR</span> key2 <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span>
    <span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> tbl_name <span class="token keyword">WHERE</span> <span class="token punctuation">(</span>key1 <span class="token operator">=</span> <span class="token number">10</span> <span class="token operator">OR</span> key2 <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">)</span> <span class="token operator">AND</span> non_key<span class="token operator">=</span><span class="token number">30</span><span class="token punctuation">;</span>
    <span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> t1<span class="token punctuation">,</span> t2 <span class="token keyword">WHERE</span> <span class="token punctuation">(</span>t1<span class="token punctuation">.</span>key1 <span class="token operator">IN</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">OR</span> t1<span class="token punctuation">.</span>key2 <span class="token operator">LIKE</span> <span class="token string">'value%'</span><span class="token punctuation">)</span> <span class="token operator">AND</span> t2<span class="token punctuation">.</span>key1<span class="token operator">=</span>t1<span class="token punctuation">.</span>some_col<span class="token punctuation">;</span>
    <span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> t1<span class="token punctuation">,</span> t2 <span class="token keyword">WHERE</span> t1<span class="token punctuation">.</span>key1<span class="token operator">=</span><span class="token number">1</span> <span class="token operator">AND</span> <span class="token punctuation">(</span>t2<span class="token punctuation">.</span>key1<span class="token operator">=</span>t1<span class="token punctuation">.</span>some_col <span class="token operator">OR</span> t2<span class="token punctuation">.</span>key2<span class="token operator">=</span>t1<span class="token punctuation">.</span>some_col2<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p>但是第四个例子，感觉并不会使用 index merge. 因为 t2.key1=t1.some_col 和 t2.key2=t1.some_col2 之间进行的是 OR 运算，而且 t2.key2 是复合索引的第二个字段(非第一个字段)。所以：t2.key2 = t1.some_col2 并不能使用到复合索引。(文档这里应该是错误的)</p>
<p>index merge 算法根据合并算法的不同分成了三种：intersect, union, sort_union. </p>
<h2 id="2-index-merge-之-intersect"><a href="#2-index-merge-之-intersect" class="headerlink" title="2.index merge 之 intersect"></a>2.index merge 之 intersect</h2><p>简单而言，index intersect merge就是多个索引条件扫描得到的结果进行交集运算。显然在多个索引提交之间是 AND 运算时，才会出现 index intersect merge. 下面两种where条件或者它们的组合时会进行 index intersect merge:</p>
<p>1) 条件使用到复合索引中的所有字段或者左前缀字段(对单字段索引也适用)</p>
<p>key_part1=const1 AND key_part2=const2 … AND key_partN=constN<br>2) 主键上的任何范围条件</p>
<p>例子：</p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> innodb_table <span class="token keyword">WHERE</span> primary_key <span class="token operator">&lt;</span> <span class="token number">10</span> <span class="token operator">AND</span> key_col1<span class="token operator">=</span><span class="token number">20</span><span class="token punctuation">;</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> tbl_name <span class="token keyword">WHERE</span> <span class="token punctuation">(</span>key1_part1<span class="token operator">=</span><span class="token number">1</span> <span class="token operator">AND</span> key1_part2<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">AND</span> key2<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>上面只说到复合索引，但是其实单字段索引显然也是一样的。比如 select * from tab where key1=xx and key2 =xxx; 也是有可能进行index intersect merge的。另外上面两种情况的 AND 组合也一样可能会进行 index intersect merge.</p>
<p>The Index Merge intersection algorithm performs simultaneous scans on all used indexes and produces the intersection of row sequences that it receives from the merged index scans. (intersect merge运行方式：多个索引同时扫描，然后结果取交集)</p>
<p>If all columns used in the query are covered by the used indexes, full table rows are not retrieved (EXPLAIN output contains Using index in Extra field in this case). Here is an example of such a query:(索引覆盖扫描，无需回表)</p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> <span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token keyword">FROM</span> t1 <span class="token keyword">WHERE</span> key1<span class="token operator">=</span><span class="token number">1</span> <span class="token operator">AND</span> key2<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>If the used indexes do not cover all columns used in the query, full rows are retrieved only when the range conditions for all used keys are satisfied.(索引不能覆盖，则对满足条件的再进行回表)</p>
<p>If one of the merged conditions is a condition over a primary key of an InnoDB table, it is not used for row retrieval, but is used to filter out rows retrieved using other conditions.</p>
<h2 id="3-index-merge-之-union"><a href="#3-index-merge-之-union" class="headerlink" title="3.index merge 之 union"></a>3.index merge 之 union</h2><p>简单而言，index uion merge就是多个索引条件扫描，对得到的结果进行并集运算，显然是多个条件之间进行的是 OR 运算。</p>
<p>下面几种类型的 where 条件，以及他们的组合可能会使用到 index union merge算法：</p>
<p>1) 条件使用到复合索引中的所有字段或者左前缀字段(对单字段索引也适用)</p>
<p>2) 主键上的任何范围条件</p>
<p>3) 任何符合 index intersect merge 的where条件；</p>
<p>上面三种 where 条件进行 OR 运算时，可能会使用 index union merge算法。</p>
<p>例子：</p>
<p>SELECT <em> FROM t1 WHERE key1=1 OR key2=2 OR key3=3;<br>SELECT </em> FROM innodb_table WHERE (key1=1 AND key2=2) OR (key3=’foo’ AND key4=’bar’) AND key5=5;<br>第一个例子，就是三个 单字段索引 进行 OR 运算，所以他们可能会使用 index union merge算法。</p>
<p>第二个例子，复杂一点。(key1=1 AND key2=2) 是符合 index intersect merge; (key3=’foo’ AND key4=’bar’) AND key5=5 也是符合index intersect merge，所以 二者之间进行 OR 运算，自然可能会使用 index union merge算法。</p>
<h2 id="4-index-merge-之-sort-union"><a href="#4-index-merge-之-sort-union" class="headerlink" title="4.index merge 之 sort_union"></a>4.index merge 之 sort_union</h2><p>This access algorithm is employed when the WHERE clause was converted to several range conditions combined by OR, but for which the Index Merge method union algorithm is not applicable.(多个条件扫描进行 OR 运算，但是不符合 index union merge算法的，此时可能会使用 sort_union算法)</p>
<p>官方文档给出了两个例子：</p>
<p>SELECT <em> FROM tbl_name WHERE key_col1 &lt; 10 OR key_col2 &lt; 20;<br>SELECT </em> FROM tbl_name WHERE (key_col1 &gt; 10 OR key_col2 = 20) AND nonkey_col=30;<br>但是显然：因为 key_col2 不是复合索引的第一个字段，对它进行 OR 运算，是不可能使用到索引的。所以这两个例子应该也是错误的，它们实际上并不会进行 index sort_union merge算法。</p>
<p>The difference between the sort-union algorithm and the union algorithm is that the sort-union algorithm must first fetch row IDs for all rows and sort them before returning any rows.(sort-union合并算法和union合并算法的不同点，在于返回结果之前是否排序，为什么需要排序呢？可能是因为两个结果集，进行并集运算，需要去重，所以才进行排序？？？)</p>
<h2 id="5-index-merge的局限"><a href="#5-index-merge的局限" class="headerlink" title="5.index merge的局限"></a>5.index merge的局限</h2><p>1）If your query has a complex WHERE clause with deep AND/OR nesting and MySQL does not choose the optimal plan, try distributing terms using the following identity laws:</p>
<p>(x AND y) OR z = (x OR z) AND (y OR z)<br>(x OR y) AND z = (x AND z) OR (y AND z)<br>如果我们的条件比较复杂，用到多个 and / or 条件运算，而MySQL没有使用最优的执行计划，那么可以使用上面的两个等式将条件进行转换一下。</p>
<p>2）Index Merge is not applicable to full-text indexes. We plan to extend it to cover these in a future MySQL release.(全文索引没有index merge)</p>
<p>3）Before MySQL 5.6.6, if a range scan is possible on some key, the optimizer will not consider using Index Merge Union or Index Merge Sort-Union algorithms. For example, consider this query:</p>
<p>SELECT * FROM t1 WHERE (goodkey1 &lt; 10 OR goodkey2 &lt; 20) AND badkey &lt; 30;<br>For this query, two plans are possible:</p>
<p>An Index Merge scan using the (goodkey1 &lt; 10 OR goodkey2 &lt; 20) condition.</p>
<p>A range scan using the badkey &lt; 30 condition.</p>
<p>However, the optimizer considers only the second plan.</p>
<p>这一点对以低版本的MySQL是一个很大的缺陷。就是如果where条件中有 &gt;, &lt;, &gt;=, &lt;=等条件，那么优化器不会使用 index merge，而且还会忽略其他的索引，不会使用它们，哪怕他们的选择性更优。</p>
<h2 id="6-对-index-merge-的进一步优化"><a href="#6-对-index-merge-的进一步优化" class="headerlink" title="6.对 index merge 的进一步优化"></a>6.对 index merge 的进一步优化</h2><p>index merge使得我们可以使用到多个索引同时进行扫描，然后将结果进行合并。听起来好像是很好的功能，但是如果出现了 index intersect merge，那么一般同时也意味着我们的索引建立得不太合理，因为 index intersect merge 是可以通过建立 复合索引进行更一步优化的。</p>
<p>比如下面的select:</p>
<p>SELECT * FROM t1 WHERE key1=1 AND key2=2 AND key3=3;<br>显然我们是可以在这三个字段上建立一个复合索引来进行优化的，这样就只需要扫描一个索引一次，而不是对三个所以分别扫描一次。</p>
<p>percona官网有一篇 比较复合索引和index merge 的好文章：Multi Column indexes vs Index Merge</p>
<h2 id="7-复合索引的最左前缀原则"><a href="#7-复合索引的最左前缀原则" class="headerlink" title="7.复合索引的最左前缀原则"></a>7.复合索引的最左前缀原则</h2><p>上面我们说到，对复合索引的非最左前缀字段进行 OR 运算，是无法使用到复合索引的。比如：</p>
<p>SELECT * FROM tbl_name WHERE (key_col1 &gt; 10 OR key_col2 = 20) AND nonkey_col=30;<br>其原因是，MySQL中的索引，使用的是B+tree, 也就是说他是：先按照复合索引的 第一个字段的大小来排序，插入到 B+tree 中的，当第一个字段值相同时，在按照第二个字段的值比较来插入的。那么如果我们需要对： OR key_col2 = 20 这样的条件也使用复合索引，那么该怎么操作呢？应该要对复合索引进行全扫描，找出所有 key_col2 =20 的项，然后还要回表去判断 nonkey_col=30，显然代价太大了。所以一般而言 OR key_col2 = 20 这样的条件是无法使用到复合索引的。如果一定要使用索引，那么可以在 col2 上单独建立一个索引。</p>
<p>复合索引的最左前缀原则：</p>
<p>MySQL中的复合索引，查询时只会使用到最左前缀，比如：</p>
<pre class="line-numbers language-bash"><code class="language-bash">    mysql<span class="token operator">></span> show index from role_goods<span class="token punctuation">;</span>


    +------------+------------+----------+--------------+-------------+-----------+-------------+----------+--------+------+------------+---------+---------------+
    <span class="token operator">|</span> Table      <span class="token operator">|</span> Non_unique <span class="token operator">|</span> Key_name <span class="token operator">|</span> Seq_in_index <span class="token operator">|</span> Column_name <span class="token operator">|</span> Collation <span class="token operator">|</span> Cardinality <span class="token operator">|</span> Sub_part <span class="token operator">|</span> Packed <span class="token operator">|</span> Null <span class="token operator">|</span> Index_type <span class="token operator">|</span> Comment <span class="token operator">|</span> Index_comment <span class="token operator">|</span>
    +------------+------------+----------+--------------+-------------+-----------+-------------+----------+--------+------+------------+---------+---------------+
    <span class="token operator">|</span> role_goods <span class="token operator">|</span>          0 <span class="token operator">|</span> PRIMARY  <span class="token operator">|</span>            1 <span class="token operator">|</span> <span class="token function">id</span>          <span class="token operator">|</span> A         <span class="token operator">|</span>       22816 <span class="token operator">|</span>     NULL <span class="token operator">|</span> NULL   <span class="token operator">|</span>      <span class="token operator">|</span> BTREE      <span class="token operator">|</span>         <span class="token operator">|</span>               <span class="token operator">|</span>
    <span class="token operator">|</span> role_goods <span class="token operator">|</span>          1 <span class="token operator">|</span> roleId   <span class="token operator">|</span>            1 <span class="token operator">|</span> roleId      <span class="token operator">|</span> A         <span class="token operator">|</span>        1521 <span class="token operator">|</span>     NULL <span class="token operator">|</span> NULL   <span class="token operator">|</span> YES  <span class="token operator">|</span> BTREE      <span class="token operator">|</span>         <span class="token operator">|</span>               <span class="token operator">|</span>
    <span class="token operator">|</span> role_goods <span class="token operator">|</span>          1 <span class="token operator">|</span> goodsId  <span class="token operator">|</span>            1 <span class="token operator">|</span> goodsId     <span class="token operator">|</span> A         <span class="token operator">|</span>        1521 <span class="token operator">|</span>     NULL <span class="token operator">|</span> NULL   <span class="token operator">|</span> YES  <span class="token operator">|</span> BTREE      <span class="token operator">|</span>         <span class="token operator">|</span>               <span class="token operator">|</span>
    <span class="token operator">|</span> role_goods <span class="token operator">|</span>          1 <span class="token operator">|</span> roleId_2 <span class="token operator">|</span>            1 <span class="token operator">|</span> roleId      <span class="token operator">|</span> A         <span class="token operator">|</span>        1901 <span class="token operator">|</span>     NULL <span class="token operator">|</span> NULL   <span class="token operator">|</span> YES  <span class="token operator">|</span> BTREE      <span class="token operator">|</span>         <span class="token operator">|</span>               <span class="token operator">|</span>
    <span class="token operator">|</span> role_goods <span class="token operator">|</span>          1 <span class="token operator">|</span> roleId_2 <span class="token operator">|</span>            2 <span class="token operator">|</span> status      <span class="token operator">|</span> A         <span class="token operator">|</span>        4563 <span class="token operator">|</span>     NULL <span class="token operator">|</span> NULL   <span class="token operator">|</span> YES  <span class="token operator">|</span> BTREE      <span class="token operator">|</span>         <span class="token operator">|</span>               <span class="token operator">|</span>
    <span class="token operator">|</span> role_goods <span class="token operator">|</span>          1 <span class="token operator">|</span> roleId_2 <span class="token operator">|</span>            3 <span class="token operator">|</span> number      <span class="token operator">|</span> A         <span class="token operator">|</span>       22816 <span class="token operator">|</span>     NULL <span class="token operator">|</span> NULL   <span class="token operator">|</span> YES  <span class="token operator">|</span> BTREE      <span class="token operator">|</span>         <span class="token operator">|</span>               <span class="token operator">|</span>
    +------------+------------+----------+--------------+-------------+-----------+-------------+----------+--------+------+------------+---------+---------------+
6 rows <span class="token keyword">in</span> <span class="token keyword">set</span> <span class="token punctuation">(</span>0.00 sec<span class="token punctuation">)</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>上面有一个复合索引：roleId_2(roleId,status,number)，如果条件是： where roleId=xxx and number=xxx，那么此时只会使用到最左前缀roleId，而不会使用到 number 来进行过滤。因为它们中间存在一个字段 status 没有出现在where条件中。实验如下所示：</p>
<pre class="line-numbers language-bash"><code class="language-bash">mysql<span class="token operator">></span> explain <span class="token keyword">select</span> * from role_goods where roleId<span class="token operator">=</span>100000001 and status<span class="token operator">=</span>1 and number<span class="token operator">=</span>1 limit 1<span class="token punctuation">;</span>
+----+-------------+------------+------+-----------------+----------+---------+-------------------+------+-------+
<span class="token operator">|</span> <span class="token function">id</span> <span class="token operator">|</span> select_type <span class="token operator">|</span> table      <span class="token operator">|</span> <span class="token function">type</span> <span class="token operator">|</span> possible_keys   <span class="token operator">|</span> key      <span class="token operator">|</span> key_len <span class="token operator">|</span> ref               <span class="token operator">|</span> rows <span class="token operator">|</span> Extra <span class="token operator">|</span>
+----+-------------+------------+------+-----------------+----------+---------+-------------------+------+-------+
<span class="token operator">|</span>  1 <span class="token operator">|</span> SIMPLE      <span class="token operator">|</span> role_goods <span class="token operator">|</span> ref  <span class="token operator">|</span> roleId,roleId_2 <span class="token operator">|</span> roleId_2 <span class="token operator">|</span> 23      <span class="token operator">|</span> const,const,const <span class="token operator">|</span>   13 <span class="token operator">|</span> NULL  <span class="token operator">|</span>
+----+-------------+------------+------+-----------------+----------+---------+-------------------+------+-------+
1 row <span class="token keyword">in</span> <span class="token keyword">set</span> <span class="token punctuation">(</span>0.00 sec<span class="token punctuation">)</span>

mysql<span class="token operator">></span> explain <span class="token keyword">select</span> * from role_goods where roleId<span class="token operator">=</span>100000001 and status<span class="token operator">=</span>1 limit 1<span class="token punctuation">;</span>
+----+-------------+------------+------+-----------------+----------+---------+-------------+------+-------+
<span class="token operator">|</span> <span class="token function">id</span> <span class="token operator">|</span> select_type <span class="token operator">|</span> table      <span class="token operator">|</span> <span class="token function">type</span> <span class="token operator">|</span> possible_keys   <span class="token operator">|</span> key      <span class="token operator">|</span> key_len <span class="token operator">|</span> ref         <span class="token operator">|</span> rows <span class="token operator">|</span> Extra <span class="token operator">|</span>
+----+-------------+------------+------+-----------------+----------+---------+-------------+------+-------+
<span class="token operator">|</span>  1 <span class="token operator">|</span> SIMPLE      <span class="token operator">|</span> role_goods <span class="token operator">|</span> ref  <span class="token operator">|</span> roleId,roleId_2 <span class="token operator">|</span> roleId_2 <span class="token operator">|</span> 14      <span class="token operator">|</span> const,const <span class="token operator">|</span>   13 <span class="token operator">|</span> NULL  <span class="token operator">|</span>
+----+-------------+------------+------+-----------------+----------+---------+-------------+------+-------+
1 row <span class="token keyword">in</span> <span class="token keyword">set</span> <span class="token punctuation">(</span>0.00 sec<span class="token punctuation">)</span>

mysql<span class="token operator">></span> explain <span class="token keyword">select</span> * from role_goods where roleId<span class="token operator">=</span>100000001 and number<span class="token operator">=</span>1 limit 1<span class="token punctuation">;</span>
+----+-------------+------------+------+-----------------+--------+---------+-------+------+-------------+
<span class="token operator">|</span> <span class="token function">id</span> <span class="token operator">|</span> select_type <span class="token operator">|</span> table      <span class="token operator">|</span> <span class="token function">type</span> <span class="token operator">|</span> possible_keys   <span class="token operator">|</span> key    <span class="token operator">|</span> key_len <span class="token operator">|</span> ref   <span class="token operator">|</span> rows <span class="token operator">|</span> Extra       <span class="token operator">|</span>
+----+-------------+------------+------+-----------------+--------+---------+-------+------+-------------+
<span class="token operator">|</span>  1 <span class="token operator">|</span> SIMPLE      <span class="token operator">|</span> role_goods <span class="token operator">|</span> ref  <span class="token operator">|</span> roleId,roleId_2 <span class="token operator">|</span> roleId <span class="token operator">|</span> 9       <span class="token operator">|</span> const <span class="token operator">|</span>   14 <span class="token operator">|</span> Using where <span class="token operator">|</span>
+----+-------------+------------+------+-----------------+--------+---------+-------+------+-------------+
1 row <span class="token keyword">in</span> <span class="token keyword">set</span> <span class="token punctuation">(</span>0.01 sec<span class="token punctuation">)</span>
mysql<span class="token operator">></span> explain <span class="token keyword">select</span> * from role_goods ignore index<span class="token punctuation">(</span>roleId<span class="token punctuation">)</span> where roleId<span class="token operator">=</span>100000001 and number<span class="token operator">=</span>1 limit 1<span class="token punctuation">;</span>
+----+-------------+------------+------+---------------+----------+---------+-------+------+-----------------------+
<span class="token operator">|</span> <span class="token function">id</span> <span class="token operator">|</span> select_type <span class="token operator">|</span> table      <span class="token operator">|</span> <span class="token function">type</span> <span class="token operator">|</span> possible_keys <span class="token operator">|</span> key      <span class="token operator">|</span> key_len <span class="token operator">|</span> ref   <span class="token operator">|</span> rows <span class="token operator">|</span> Extra                 <span class="token operator">|</span>
+----+-------------+------------+------+---------------+----------+---------+-------+------+-----------------------+
<span class="token operator">|</span>  1 <span class="token operator">|</span> SIMPLE      <span class="token operator">|</span> role_goods <span class="token operator">|</span> ref  <span class="token operator">|</span> roleId_2      <span class="token operator">|</span> roleId_2 <span class="token operator">|</span> 9       <span class="token operator">|</span> const <span class="token operator">|</span>   14 <span class="token operator">|</span> Using index condition <span class="token operator">|</span>
+----+-------------+------------+------+---------------+----------+---------+-------+------+-----------------------+
1 row <span class="token keyword">in</span> <span class="token keyword">set</span> <span class="token punctuation">(</span>0.01 sec<span class="token punctuation">)</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>可以看到 <code>key_len</code> 的变化：</p>
<p>显然最后一个查询仅仅使用到符合索引中的 roleId, 没有使用到 number. number使用在了 index conditon(也就是索引的push down技术)</p>
<p>注意最左前缀，并不是是指：一定要按照各个字段出现在where中的顺序来建立复合索引的。比如</p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">where</span> <span class="token keyword">status</span><span class="token operator">=</span><span class="token number">2</span> <span class="token operator">and</span> roleId<span class="token operator">=</span>xxx <span class="token operator">and</span> number <span class="token operator">=</span> xxx
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>该条件建立符合索引，我们并不需要按照status,roleId，number它们出现的顺序来建立索引：</p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">alter</span> <span class="token keyword">table</span> role_goods <span class="token keyword">add</span> <span class="token keyword">index</span> sin<span class="token punctuation">(</span><span class="token keyword">status</span><span class="token punctuation">,</span>roleId<span class="token punctuation">,</span>number<span class="token punctuation">)</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>这是对最左前缀极大的误解。因为 <code>where status=2 and roleId=xxx and number = xxx 和 where roleId=xxx and number = xxx and status=2</code>它们是等价的。复合索引，哪个字段放在最前面，需要根据哪个字段经常出现在where条件中，哪个字段的选择性最好来判断的。</p>
<p>进一步可以参考的文章：</p>
<p><a target="_blank" rel="noopener" href="http://www.orczhou.com/index.php/2013/01/mysql-source-code-query-optimization-index-merge/" title="http://www.orczhou.com/index.php/2013/01/mysql-source-code-query-optimization-index-merge/">http://www.orczhou.com/index.php/2013/01/mysql-source-code-query-optimization-index-merge/</a></p>
<p><a target="_blank" rel="noopener" href="http://www.cnblogs.com/nocode/archive/2013/01/28/2880654.html" title="http://www.cnblogs.com/nocode/archive/2013/01/28/2880654.html">http://www.cnblogs.com/nocode/archive/2013/01/28/2880654.html</a></p>

</div>


    <div class="post-guide">
        <div class="item left">
            
              <a href="../Spring/%E4%BD%BF%E7%94%A8Thymeleaf%E5%8F%98%E9%87%8F%E7%BB%99onclick%E5%B1%9E%E6%80%A7%E8%B5%8B%E5%80%BC.html">
                  <i class="fa fa-angle-left" aria-hidden="true"></i>
                  使用Thymeleaf变量给onclick属性赋值
              </a>
            
        </div>
        <div class="item right">
            
              <a href="../Spring/SpringBoot/%E5%9C%A8SpringBoot%E9%87%8C%E9%9D%A2%E4%BD%BF%E7%94%A8Thymeleaf3.html">
                SpringBoot
                <i class="fa fa-angle-right" aria-hidden="true"></i>
              </a>
            
        </div>
    </div>




<script>
	
	
</script>
	</div>
	<div id="footer">
	<p>
	©2017-<span id="footerYear"></span> 
	<a href="/">王峰</a> 
	
	
		|
		<span id="busuanzi_container_site_pv">
			PV
			<span id="busuanzi_value_site_pv"></span>
		</span>
		|
		<span id="busuanzi_container_site_uv"> 
			UV
			<span id="busuanzi_value_site_uv"></span>
		</span>
	
	<br>
	Theme <a href="//github.com/wujun234/hexo-theme-tree" target="_blank">Tree</a>
	by <a href="//github.com/wujun234" target="_blank">WuJun</a>
	Powered by <a href="//hexo.io" target="_blank">Hexo</a>
	</p>
</div>
<script type="text/javascript"> 
	document.getElementById('footerYear').innerHTML = new Date().getFullYear() + '';
</script>
	<button id="totop-toggle" class="toggle"><i class="fa fa-angle-double-up" aria-hidden="true"></i></button>
</body>
</html>